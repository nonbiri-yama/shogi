:root {
  --bg: #f6f6f6;
  --panel: #ffffff;
  --ink: #222;
  --muted: #666;
  --accent: #0c7be3;
  --square-a: #f2d5a9;
  --square-b: #e7c394;
  --select: rgba(12,123,227,.25);
  --last: rgba(0,0,0,.08);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  color: var(--ink);
  background: var(--bg);
}

.toolbar {
  display: flex; justify-content: space-between; align-items: center;
  gap: 1rem; padding: .75rem 1rem; background: var(--panel);
  border-bottom: 1px solid #e9e9e9; position: sticky; top: 0; z-index: 10;
}
.toolbar .toggle { display: inline-flex; align-items: center; gap: .5rem; margin-right: 1rem; }

button {
  padding: .5rem .75rem; border: 1px solid #ddd; border-radius: .5rem;
  background: #fff; cursor: pointer; transition: transform .05s ease;
}
button:active { transform: translateY(1px); }
button:disabled { opacity: .5; cursor: not-allowed; }

main {
  display: grid; grid-template-columns: 1fr 320px; gap: 1rem;
  padding: 1rem; max-width: 1100px; margin: 0 auto;
}
.board-wrap { display: grid; place-items: center; }
.board {
  width: min(90vmin, 720px); aspect-ratio: 1 / 1;
  display: grid; grid-template-columns: repeat(9, 1fr); grid-template-rows: repeat(9, 1fr);
  background: var(--square-a); border: 8px solid #d2a15d; border-radius: .75rem;
  box-shadow: 0 10px 30px rgba(0,0,0,.08), inset 0 0 0 1px rgba(0,0,0,.1);
  position: relative;
}

.square {
  position: relative; user-select: none; display: grid; place-items: center;
  font-weight: 700; font-variant-numeric: tabular-nums;
}
.square:nth-child(odd) { background: var(--square-b); }
.square:last-child { border-bottom-right-radius: .5rem; }

.square .mark-last { position: absolute; inset: 0; background: var(--last); pointer-events: none; }
.square .mark-select { position: absolute; inset: 0; outline: 3px solid var(--accent); background: var(--select); pointer-events: none; }

.piece {
  width: 82%; aspect-ratio: .9/.95; border-radius: .35rem; display: grid; place-items: center;
  background: #ffe8b6; border: 2px solid #d1a463; letter-spacing: .1em;
  transform-origin: center; transition: transform .15s ease;
  box-shadow: 0 4px 10px rgba(0,0,0,.12);
}
.piece.white { transform: rotate(180deg); background: #fff0c6; }
.piece.black { }

.piece.ghost { opacity: .6; border-style: dashed; }
.piece.capturable { outline: 3px dashed rgba(200,0,0,.4); }

.side { background: var(--panel); border: 1px solid #eee; border-radius: .75rem; padding: 1rem; }
.kifu { margin: .25rem 0 0; padding-left: 1.25rem; max-height: 40vh; overflow: auto; }
.kifu li { margin: .25rem 0; color: var(--muted); }
h3 { margin-top: 0; }
.settings { display: grid; gap: .5rem; margin-top: .5rem; }
.footer { padding: 1rem; text-align: center; color: var(--muted); }

